<!DOCTYPE html>
<html lang="de">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Testudo – Entscheidungsassistent</title>
  <style>
    @import url('https://fonts.googleapis.com/css2?family=Manrope:wght@400;600;700;800&display=swap');

    :root{
      color-scheme: dark;
      --bg:#040810; --bg-soft:rgba(11,20,39,.78); --panel:rgba(12,24,50,.86);
      --text:#f2f6ff; --muted:#9fb2cd; --line:rgba(255,255,255,.08);
      --brand1:#1cf2af; --brand2:#1c8fff;
      --r-lg:26px; --r-md:18px; --r-sm:12px;
      --shadow:0 32px 80px rgba(5,11,25,.55);
    }
    *{box-sizing:border-box}
    body{
      margin:0;min-height:100vh;display:flex;align-items:center;justify-content:center;
      padding:clamp(20px,4vw,48px);font-family:Manrope,system-ui,-apple-system,Segoe UI,Roboto,Arial;
      background: radial-gradient(circle at 15% -10%, rgba(28,242,175,.35), transparent 42%),
                  radial-gradient(circle at 90% 15%, rgba(28,143,255,.35), transparent 45%),
                  radial-gradient(ellipse at bottom, rgba(28,143,255,.25), transparent 60%),
                  var(--bg);
      color:var(--text); overflow:hidden;
    }
    body::before{content:"";position:fixed;inset:0;pointer-events:none;opacity:.45;mix-blend-mode:screen;z-index:0;
      background:url('data:image/svg+xml,%3Csvg width="340" height="340" viewBox="0 0 160 160" xmlns="http://www.w3.org/2000/svg" opacity="0.6"%3E%3Cdefs%3E%3ClinearGradient id="g" x1="0" y1="0" x2="1" y2="1"%3E%3Cstop offset="0" stop-color="%231c8fff"/%3E%3Cstop offset="1" stop-color="%231cf2af"/%3E%3C/linearGradient%3E%3C/defs%3E%3Cg fill="none" stroke="url(%23g)" stroke-width="0.7" opacity="0.15"%3E%3Cpath d="M5 80c30-32 120-32 150 0"/%3E%3Cpath d="M5 110c30-32 120-32 150 0"/%3E%3Cpath d="M5 50c30-32 120-32 150 0"/%3E%3C/g%3E%3C/svg%3E') center/540px 540px no-repeat}
    .shell{width:min(1100px,100%);display:flex;flex-direction:column;gap:32px;position:relative;z-index:1}
    .masthead{display:flex;gap:28px;align-items:center;justify-content:space-between;padding:clamp(24px,5vw,36px);
      background:var(--bg-soft);backdrop-filter:blur(26px);border:1px solid rgba(255,255,255,.05);border-radius:var(--r-lg);box-shadow:var(--shadow)}
    .brand{display:flex;gap:18px;align-items:center}
    .logo-img{width:160px;height:auto;border-radius:14px;object-fit:contain;display:block}
    .eyebrow{text-transform:uppercase;letter-spacing:.24em;font-size:.7rem;color:rgba(255,255,255,.65);margin:0 0 6px}
    .headline{margin:0;font-size:clamp(1.9rem,4vw,2.5rem);font-weight:800;letter-spacing:-.01em}
    .lede{margin:10px 0 0;max-width:520px;color:var(--muted);font-size:1rem;line-height:1.6}
    .meta-grid{display:grid;gap:14px;grid-template-columns:repeat(2,minmax(0,1fr));text-align:right}
    .stat{padding:12px 16px;border-radius:var(--r-sm);border:1px solid var(--line);background:rgba(10,20,38,.8);color:var(--muted);font-size:.85rem}

    .app{background:var(--panel);border-radius:var(--r-lg);box-shadow:var(--shadow);border:1px solid rgba(255,255,255,.05);overflow:hidden}
    .app-header{padding:clamp(20px,5vw,36px) clamp(24px,6vw,48px) clamp(12px,3vw,24px);
      border-bottom:1px solid rgba(255,255,255,.06);background:linear-gradient(160deg,rgba(11,29,56,.85),rgba(11,22,44,.7))}
    .label{display:inline-flex;align-items:center;gap:10px;padding:6px 12px;border-radius:999px;font-size:.8rem;letter-spacing:.08em;text-transform:uppercase;background:rgba(28,242,175,.12);color:var(--brand1);border:1px solid rgba(28,242,175,.35)}
    .wizard-title{margin:12px 0 6px;font-size:clamp(1.4rem,3vw,1.9rem);font-weight:800}
    .wizard-subtitle{margin:0;color:var(--muted);max-width:560px;line-height:1.6;font-size:.98rem}
    .progress{height:10px;margin-top:28px;background:rgba(255,255,255,.07);border-radius:999px;overflow:hidden;position:relative}
    .progress::after{content:"";position:absolute;inset:0;background:linear-gradient(135deg,rgba(28,242,175,.25),rgba(28,143,255,.25));filter:blur(18px)}
    .bar{height:100%;width:0;background:linear-gradient(90deg,var(--brand1),var(--brand2));border-radius:inherit;transition:width .3s ease;box-shadow:0 0 18px rgba(28,143,255,.45)}

    main{padding:clamp(24px,5vw,48px)}
    .qhead{font-size:clamp(1.2rem,2.7vw,1.6rem);font-weight:700;margin:0 0 16px;letter-spacing:-.01em}
    .qsub{color:var(--muted);margin:0 0 24px;font-size:.95rem;line-height:1.6}
    .grid{display:grid;gap:16px;grid-template-columns:repeat(auto-fit,minmax(220px,1fr))}
    .opt{border-radius:var(--r-md);padding:18px;background:rgba(7,15,32,.65);border:1px solid var(--line);cursor:pointer;user-select:none;
      transition:transform .18s ease,border-color .18s ease,box-shadow .18s ease;position:relative;overflow:hidden}
    .opt::after{content:"";position:absolute;inset:-50% -10%;background:radial-gradient(circle,rgba(28,242,175,.18),transparent 60%);opacity:0;transition:opacity .18s ease;pointer-events:none}
    .opt:hover{transform:translateY(-4px);border-color:rgba(28,242,175,.4);box-shadow:0 18px 32px rgba(9,20,38,.4)}
    .opt:hover::after{opacity:1}
    .opt.selected{border:1px solid rgba(28,242,175,.65);box-shadow:0 0 0 1px rgba(28,242,175,.35);background:linear-gradient(140deg,rgba(28,242,175,.18),rgba(28,143,255,.12))}
    .opt input{display:none}
    .pill{display:inline-flex;gap:12px;align-items:center;font-size:1rem;letter-spacing:-.01em}

    .controls{display:flex;justify-content:space-between;align-items:center;gap:16px;margin-top:clamp(24px,4vw,32px);flex-wrap:wrap}
    .row{display:flex;gap:12px;flex-wrap:wrap}
    .btn{padding:13px 18px;border-radius:var(--r-sm);border:1px solid var(--line);background:rgba(6,15,30,.7);color:var(--text);cursor:pointer;font-weight:700}
    .btn:hover:not([disabled]){transform:translateY(-2px);border-color:rgba(28,242,175,.4);background:rgba(9,20,38,.85)}
    .btn[disabled]{opacity:.45;cursor:default}
    .btn.primary{border:none;color:#041321;background:linear-gradient(120deg,var(--brand1),var(--brand2));box-shadow:0 14px 28px rgba(28,143,255,.45)}

    .summary{display:none;margin-top:clamp(32px,5vw,42px)}
    .summary h2{margin:0 0 20px;font-size:1.3rem}
    #answers{display:flex;flex-wrap:wrap;gap:10px}
    .tag{display:inline-flex;align-items:center;gap:8px;padding:10px 14px;border-radius:999px;background:rgba(8,19,36,.85);border:1px solid var(--line);font-size:.92rem}
    .hr{height:1px;background:var(--line);margin:24px 0}
    .help{font-size:.9rem;color:var(--muted);line-height:1.6}
    .footer-note{margin-top:24px;color:rgba(255,255,255,.5);font-size:.85rem}
    .hidden{display:none !important}

    @media (max-width:960px){.masthead{flex-direction:column;align-items:flex-start}.meta-grid{width:100%;grid-template-columns:1fr;text-align:left}}
    @media (max-width:640px){body{padding:18px}.grid{grid-template-columns:1fr}.controls{flex-direction:column;align-items:stretch}.row{width:100%;flex-direction:column}.btn,.row .btn{width:100%}}
  </style>
</head>
<body>
  <div class="shell">
    <header class="masthead">
      <div class="brand">
        <!-- LOGO: passe den Pfad an (./Testudo.png oder ./assets/Testudo.png) -->
        <img class="logo-img" src="./assets/Testudo.png" alt="Testudo Logo" />
        <div>
          <p class="eyebrow">Testudo</p>
          <h1 class="headline">Conversational UI for Insurance</h1>
          <p class="lede">Ziel dieses Projekts ist ein digitaler Entscheidungshelfer, der Interessenten strukturiert zu passenden Gesundheitsversicherungen führt.</p>
        </div>
      </div>
      <div class="meta-grid">
        <div class="stat">Developed by Kaan, Kadir, Cetin, Mustafa</div>
        <div class="stat">Letzte Aktualisierung: 31.10.2025</div>
      </div>
    </header>

    <div class="app" id="app">
      <div class="app-header">
        <span class="label">Onboarding Wizard</span>
        <h2 class="wizard-title">Ihre Antworten führen zur Empfehlung</h2>
        <p class="wizard-subtitle">Beantworten Sie die Fragen nacheinander. Sie können jederzeit zurückspringen oder überspringen.</p>
        <div class="progress"><div class="bar" id="bar"></div></div>
      </div>

      <main>
        <div id="question"></div>

        <div class="controls">
          <button class="btn" id="prevBtn">Zurück</button>
          <div class="row">
            <button class="btn" id="skipBtn">Ich weiß es nicht</button>
            <button class="btn primary" id="nextBtn">Weiter</button>
          </div>
        </div>

        <section class="summary" id="summary">
          <h2>Zusammenfassung Ihrer Angaben</h2>
          <div id="answers"></div>
          <div class="hr"></div>
          <p class="help">Die finale Empfehlung (z. B. GKV + Zahnzusatz) kann auf Basis dieser Antworten berechnet werden.</p>
        </section>

        <div class="footer-note">MVP-Wizard · eine Frage pro Schritt · bedingte Sichtbarkeit · Mehrfachauswahl</div>
      </main>
    </div>
  </div>

  <script>
    // ——— Fragen
    // Hinweis: Mehrfachfragen sind standardmäßig NICHT required (required:false),
    // damit „Weiter“ nicht blockiert, wenn man keine Auswahl treffen möchte.
    const QUESTIONS = [
      { id:"age", title:"Wie alt sind Sie?", type:"single",
        options:["18–29","30–39","40–59","ab 60"], required:true },

      { id:"occupation", title:"Was ist Ihr aktueller Beruf?", type:"single",
        options:["Beamter","Selbstständig","Angestellter","Auszubildender/Student","Arbeitslos","Rente"], required:true },

      { id:"income", title:"Wie hoch ist Ihr jährliches Bruttoeinkommen?", type:"single",
        options:["Unter 20.000 €","20.001–40.000 €","40.001–69.299 €","Über 69.300 €"], required:true },

      { id:"jobIntensity", title:"Wie körperlich intensiv ist Ihr Beruf?", type:"single",
        options:["überwiegend sitzend","teilweise körperlich","stark körperlich"], required:false },

      { id:"extrasImportance", title:"Sind Ihnen Zusatzleistungen wichtig?", type:"yesno", required:false },

      { id:"extrasSelection", title:"Bitte wählen Sie Zusatzleistungen aus, die Ihnen wichtig sind", type:"multi",
        visibleIf:a => a.extrasImportance==="Ja", required:false,
        options:["Zahnleistungen","Reiseversicherungen","Krankenleistungen"] },

      { id:"maritalStatus", title:"Wie ist Ihr Familienstand?", type:"single",
        options:["Ledig","In Partnerschaft","Verheiratet","Geschieden","Verwitwet"], required:true },

      { id:"hasChildren", title:"Haben Sie Kinder?", type:"yesno", required:true },

      { id:"insureChildren", title:"Kinder mitversichern?", type:"yesno",
        visibleIf:a => a.hasChildren==="Ja", required:false },

      { id:"childrenAge", title:"Wie alt ist Ihr Kind? (optional)", type:"multi",
        visibleIf:a => a.insureChildren==="Ja", required:false,
        options:["unter 6 Jahre","6–17 Jahre","18–25 Jahre","über 25 Jahre"] },

      { id:"childrenBenefits", title:"Welche Leistungen sind Ihnen für Ihre Kinder wichtig? (optional)", type:"multi",
        visibleIf:a => a.hasChildren==="Ja", required:false,
        options:["Zusätzliche Zahnleistungen","Zusätzliche Reiseversicherungen","Zusätzliche Krankenleistungen","Ich weiß es nicht"] },

      { id:"specialistTreatment", title:"Sind Sie in regelmäßiger fachärztlicher Behandlung?", type:"yesno", required:false },

      { id:"treatmentReason", title:"Behandlung aus welchen Gründen?", type:"single",
        visibleIf:a => a.specialistTreatment==="Ja", required:false,
        options:["Aus Behandlungsgründen","Aus Vorsorgegründen"] },

      { id:"chronicDiseases", title:"Haben Sie chronische Erkrankungen?", type:"yesno", required:false },

      { id:"chronicDiseaseTypes", title:"Welche chronischen Erkrankungen? (optional)", type:"multi",
        visibleIf:a => a.chronicDiseases==="Ja", required:false,
        options:[
          "Bluthochdruck / Herz-Kreislauf","Diabetes / Stoffwechsel","Asthma / Atemwege","Depression / psychische Erkrankung",
          "Rücken-/Gelenkbeschwerden","Autoimmun (z. B. Hashimoto, Rheuma)","Verdauung/Leber","Nierenerkrankung","Krebs/Tumor"
        ] },

      { id:"careDegree", title:"Haben Sie einen Pflegegrad oder eine anerkannte Behinderung?", type:"yesno", required:false },

      { id:"careDegreeLevel", title:"Welchen Pflegegrad haben Sie?", type:"single",
        visibleIf:a => a.careDegree==="Ja", required:false,
        options:["1","2","3","4","5"] },

      { id:"travel", title:"Reisen Sie regelmäßig?", type:"single",
        options:["Ja, innerhalb der EU","Ja, außerhalb der EU","Nein"], required:false },

      { id:"travelRegions", title:"In welche Gebiete? (optional)", type:"multi",
        visibleIf:a => a.travel==="Ja, innerhalb der EU" || a.travel==="Ja, außerhalb der EU", required:false,
        options:["USA / Kanada","Afrika","Naher Osten","Asien / Australien","Südamerika"] },

      { id:"dangerousSports", title:"Üben Sie gefährliche Sportarten aus?", type:"yesno", required:false },

      { id:"sportsTypes", title:"Welche Sportart(en)? (optional)", type:"multi",
        visibleIf:a => a.dangerousSports==="Ja", required:false,
        options:["Hohes Risiko","Mittleres Risiko","Geringes Risiko"] },

      { id:"smoking", title:"Rauchen Sie Zigaretten oder ähnliche Tabakwaren?", type:"single",
        options:["Ja","Gelegentlich","Nein"], required:false },

      { id:"smokingType", title:"Was rauchen Sie?", type:"single",
        visibleIf:a => a.smoking==="Ja" || a.smoking==="Gelegentlich", required:false,
        options:["Cannabis","Zigaretten","Cannabis und Zigaretten"] },

      { id:"medicalCannabis", title:"Cannabis auf Rezept?", type:"yesno",
        visibleIf:a => a.smokingType==="Cannabis" || a.smokingType==="Cannabis und Zigaretten", required:false }
    ];

    const state = { step:0, answers:{}, order:[] };

    function recomputeOrder(){
      const visible = [];
      for(const q of QUESTIONS){
        const v = (typeof q.visibleIf === 'function') ? !!q.visibleIf(state.answers) : true;
        if(v){ visible.push(q); } else { delete state.answers[q.id]; }
      }
      state.order = visible;
      if(state.step >= state.order.length) state.step = Math.max(0, state.order.length-1);
    }

    function render(){
      recomputeOrder();
      const q = state.order[state.step];
      const box = document.getElementById('question');
      if(!q){ showSummary(); return; }

      const subtitle = q.subtitle ? `<div class="qsub">${q.subtitle}</div>` : "";
      const current = state.answers[q.id];
      const opt = (label, selected) =>
        `<label class="opt ${selected?'selected':''}" data-value="${label}" role="button" tabindex="0">
           <input ${q.type==='multi'?'type="checkbox"':'type="radio"'} name="${q.id}" />
           <span class="pill">${label}</span>
         </label>`;

      let optionsHTML="";
      if(q.type==='single'){
        optionsHTML = `<div class="grid">${q.options.map(o=>opt(o,current===o)).join("")}</div>`;
      }else if(q.type==='multi'){
        const cur = Array.isArray(current)?current:[];
        optionsHTML = `<div class="grid">${q.options.map(o=>opt(o,cur.includes(o))).join("")}</div>`;
      }else if(q.type==='yesno'){
        const ys=["Ja","Nein"];
        optionsHTML = `<div class="grid">${ys.map(o=>opt(o,current===o)).join("")}</div>`;
      }

      box.innerHTML = `<div class="qhead">${q.title}</div>${subtitle}${optionsHTML}`;

      // Klick-Logik — robust für multi
      box.querySelectorAll('.opt').forEach(el=>{
        el.addEventListener('click', (e)=>{
          e.preventDefault();
          const value = el.dataset.value;
          if(q.type==='multi'){
            const arr = Array.isArray(state.answers[q.id]) ? [...state.answers[q.id]] : [];
            const i = arr.indexOf(value);
            (i>=0) ? arr.splice(i,1) : arr.push(value);
            state.answers[q.id] = arr;
            el.classList.toggle('selected');
          }else{
            state.answers[q.id] = value;
            box.querySelectorAll('.opt').forEach(x=>x.classList.remove('selected'));
            el.classList.add('selected');
          }
          updateButtons();
        });
      });

      updateButtons();
      updateProgress();
      hideSummary();
    }

    function isRequired(q){ return q.required === true; }

    function currentAnswered(){
      const q = state.order[state.step];
      if(!q) return true;
      const v = state.answers[q.id];

      if(!isRequired(q)) return true; // optional → immer ok

      if(q.type==='multi') return Array.isArray(v) && v.length>0;
      return !!v;
    }

    function updateButtons(){
      document.getElementById('prevBtn').disabled = state.step===0;
      document.getElementById('nextBtn').disabled = !currentAnswered();
    }

    function updateProgress(){
      const total = Math.max(1, state.order.length);
      const pct = Math.round((state.step)/total*100);
      document.getElementById('bar').style.width = `${pct}%`;
    }

    function showSummary(){
      document.getElementById('question').classList.add('hidden');
      document.querySelector('.controls').classList.add('hidden');
      const s = document.getElementById('summary'); s.style.display='block';
      const answered = QUESTIONS.filter(q => state.answers[q.id] !== undefined && (!q.visibleIf || q.visibleIf(state.answers)));
      document.getElementById('answers').innerHTML = answered.map(q=>{
        const v = state.answers[q.id];
        const val = Array.isArray(v)? v.join(", ") : (v ?? "—");
        return `<div class="tag"><strong>${q.title}:</strong>&nbsp; ${val}</div>`;
      }).join("");
      document.getElementById('bar').style.width = "100%";
    }
    function hideSummary(){
      document.getElementById('summary').style.display='none';
      document.getElementById('question').classList.remove('hidden');
      document.querySelector('.controls').classList.remove('hidden');
    }

    // Navigation
    document.getElementById('prevBtn').addEventListener('click', ()=>{ if(state.step>0){ state.step--; render(); } });
    document.getElementById('nextBtn').addEventListener('click', ()=>{ (state.step < state.order.length-1) ? (state.step++, render()) : showSummary(); });
    document.getElementById('skipBtn').addEventListener('click', ()=>{
      const q = state.order[state.step];
      if(!isRequired(q)) state.answers[q.id] = "Ich weiß es nicht";
      (state.step < state.order.length-1) ? (state.step++, render()) : showSummary();
    });

    // Start
    render();
  </script>
</body>
</html>
